<mvc:View controllerName="tutorial.tutorial.controller.Main"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <content>
			<Table
				id="peopleList"
				growing="true"
				growingThreshold="10"
				items="{
					path: '/People',
					parameters: {
						$count: true,
						$$updateGroupId: 'peopleGroup'
					} 
				}"
				mode="SingleSelectLeft">
                <!--Where does "/People" come from? How does it tie to the oData?-->
				<!--What does $count do? The number of list items was already shown before we added count.-->

                <headerToolbar>
                    <OverflowToolbar id="overflowToolbar">
                        <content>
                            <ToolbarSpacer id="headerToolbarSpacer"/>
							<SearchField 
								id="searchField"
								width="30%"
								placeholder="{i18n>searchFieldPlaceholder}"
								enabled="{= !${appView>/hasUIChanges}}"
								search="onSearch"/>
							<Button 
								id="addUserButon"
								icon="sap-icon://add"
								tooltip="{i18n>createButtonText}"
								press="onCreate" >
								<layoutData>
									<OverflowToolbarLayoutData id="overflowToolbarLayoutDataAdd" priority="NeverOverflow"/>
								</layoutData>
							</Button>
							<Button
								id="deleteUserButton"
								icon="sap-icon://delete"
								tooltip="{i18n>deleteButtonText}"
								press="onDelete">
								<layoutData>
									<OverflowToolbarLayoutData id="overflowToolbarLayoutDataDelete" priority="NeverOverflow"/>
								</layoutData>
							</Button>
                            <Button 
                                id="refreshButton"
                                icon="sap-icon://refresh"
                                tooltip="{i18n>refreshButtonText}" 
                                press="onRefresh" />
							<Button 
								id="sortUserButton"
								icon="sap-icon://sort"
								enabled="{= !${appView>/hasUIChanges}}"
								tooltip="{i18n>sortButtonText}"
								press="onSort"/>
                        </content>
                    </OverflowToolbar>
                </headerToolbar>
				<columns>
				    <Column id="userNameColumn">
						<Text id="userNameLabel" text="{i18n>userNameLabelText}"/>
				    </Column>
					<Column id="firstNameColumn">
						<Text id="firstNameLabel" text="{i18n>firstNameLabelText}"/>
					</Column>
					<Column id="lastNameColumn">
						<Text id="lastNameLabel" text="{i18n>lastNameLabelText}"/>
					</Column>
					<Column id="ageColumn">
						<Text id="ageLabel" text="{i18n>ageLabelText}"/>
					</Column>
				</columns>
				<items>
					<ColumnListItem id="columnListItem">
						<cells>
							<Input 
								id="userNameInput" 
								value="{UserName}"
								valueLiveUpdate="true"
								liveChange="onInputChange"/>
						</cells>
						<cells>
							<Input 
								id="firstNameInput" 
								value="{FirstName}" 
								liveChange="onInputChange"/>
						</cells>
						<cells>
							<Input 
								id="lastNameInput" 
								value="{LastName}" 
								liveChange="onInputChange"/>
						</cells>
						<cells>
							<Input 
								id="ageInput" 
								value="{Age}" 
								valueLiveUpdate="true" 
								liveChange="onInputChange"/>
						</cells>
					</ColumnListItem>
				</items>
			</Table>
		</content>
		<footer>
			<Toolbar id="footerToolbar" visible="{appView>/hasUIChanges}" >
				<ToolbarSpacer id="footerToolbarSpacer"/>
				<Button 
					id="saveButton"
					type="Emphasized"
					text="{i18n>saveButtonText}"
					enabled="{= ${appView>/usernameEmpty} === false}"
					press="onSave" />
				<Button 
					id="doneButton" 
					text="{i18n>cancelButtonText}"
					press="onResetChanges"/>
			</Toolbar>
		</footer>
    </Page>
</mvc:View>
